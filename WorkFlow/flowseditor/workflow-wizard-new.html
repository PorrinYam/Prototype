<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新建流程向导</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <link rel="stylesheet" href="../css/workflow-wizard-new.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .template-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: #fff;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .template-list {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 4px 4px 12px 4px;
            scrollbar-width: thin;
            scrollbar-color: #1890ff #f0f0f0;
        }

        .template-list::-webkit-scrollbar {
            height: 6px;
        }

        .template-list::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 3px;
        }

        .template-list::-webkit-scrollbar-thumb {
            background: #1890ff;
            border-radius: 3px;
        }

        .template-card {
            min-width: 180px;
            max-width: 220px;
            padding: 16px;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.25s ease;
            background: #fafafa;
            position: relative;
            overflow: hidden;
        }

        .template-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
            border-color: #40a9ff;
            background: #fff;
        }

        .template-card.selected {
            border-color: #1890ff;
            background-color: #e6f7ff;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
        }

        .template-card .template-icon {
            margin-bottom: 12px;
            color: #1890ff;
            font-size: 24px;
        }

        .template-card h4 {
            margin: 0 0 8px 0;
            font-size: 16px;
            color: #262626;
            font-weight: 500;
        }

        .template-card p {
            margin: 0;
            font-size: 14px;
            color: #595959;
            line-height: 1.5;
        }

        .template-card .selected-mark {
            position: absolute;
            top: -20px;
            right: -20px;
            width: 40px;
            height: 40px;
            background: #1890ff;
            transform: rotate(45deg);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .template-card.selected .selected-mark {
            opacity: 1;
            top: -12px;
            right: -12px;
        }

        .template-card .selected-icon {
            position: absolute;
            top: 4px;
            right: 4px;
            color: white;
            font-size: 12px;
            transform: rotate(-45deg);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .template-card.selected .selected-icon {
            opacity: 1;
        }

        /* 修复表单设计容器突出的问题 */
        .wizard-step-content {
            height: calc(100vh - 110px);
            overflow: hidden;
            position: relative;
        }

        .form-design {
            height: 100%;
            overflow: hidden;
        }

        .form-design-container {
            display: flex;
            height: 100%;
            margin: 0;
            background: #fff;
            border-radius: 0;
            box-shadow: none;
            overflow: hidden;
        }

        .component-sidebar {
            width: 240px;
            border-right: 1px solid #e8e8e8;
            background: #fff;
            overflow-y: auto;
            padding: 0;
            flex-shrink: 0;
        }

        .component-group {
            padding: 0;
            margin-bottom: 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .component-group h4 {
            font-size: 14px;
            color: #262626;
            margin: 0;
            padding: 12px 16px;
            background: #f7f7f7;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            font-weight: normal;
        }

        .component-group h4 i {
            margin-right: 8px;
            color: #1890ff;
        }

        .component-items {
            padding: 8px 16px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .component-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 12px 8px;
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            cursor: move;
            transition: all 0.2s ease;
            user-select: none;
            text-align: center;
        }

        .component-item:hover {
            border-color: #1890ff;
            background: #f0f7ff;
            transform: translateY(-2px);
            box-shadow: 0 2px 6px rgba(24,144,255,0.1);
        }

        .component-item i {
            font-size: 18px;
            color: #1890ff;
            margin-bottom: 6px;
        }

        .component-item span {
            font-size: 12px;
            color: #595959;
        }

        .form-canvas {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f5f5f5;
            overflow: hidden;
            position: relative;
        }

        .form-canvas-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 16px;
            background: #fff;
            border-bottom: 1px solid #e8e8e8;
            flex-shrink: 0;
            height: 50px;
        }

        .form-canvas-title {
            font-size: 14px;
            font-weight: 500;
            color: #262626;
            flex-shrink: 0;
        }

        .form-canvas-device-switch {
            display: flex;
            background: #f0f0f0;
            border-radius: 4px;
            padding: 2px;
            margin: 0 16px;
        }

        .device-switch-btn {
            display: flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            color: #595959;
            transition: all 0.2s;
        }

        .device-switch-btn i {
            margin-right: 4px;
        }

        .device-switch-btn.active {
            background: #fff;
            color: #1890ff;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .form-canvas-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .form-canvas-action {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            cursor: pointer;
            color: #595959;
            transition: all 0.2s;
        }

        .form-canvas-action:hover {
            color: #1890ff;
            border-color: #1890ff;
        }

        .form-canvas-content {
            flex: 1;
            overflow-y: auto;
            position: relative;
            padding: 0;
        }

        .form-design-area {
            min-height: 100%;
            padding: 24px;
            background: #f5f5f5;
            position: relative;
        }

        .form-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #8c8c8c;
            background: #fff;
            padding: 24px;
            border-radius: 8px;
            border: 2px dashed #e8e8e8;
            width: 80%;
            max-width: 400px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .placeholder-icon {
            font-size: 32px;
            color: #1890ff;
            margin-bottom: 16px;
        }

        .placeholder-text {
            font-size: 14px;
            color: #8c8c8c;
        }

        .form-field {
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            background: #fff;
            position: relative;
            transition: all 0.3s;
            box-shadow: 0 1px 2px rgba(0,0,0,0.02);
        }

        .form-field:hover {
            border-color: #40a9ff;
            box-shadow: 0 2px 8px rgba(24,144,255,0.1);
        }

        .form-field.selected {
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
        }

        .field-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .field-header i {
            margin-right: 8px;
            color: #1890ff;
        }

        .field-header span {
            font-size: 14px;
            color: #262626;
            font-weight: 500;
        }

        .field-content {
            position: relative;
        }

        .field-actions {
            position: absolute;
            right: 8px;
            top: 8px;
            display: flex;
            gap: 4px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .form-field:hover .field-actions {
            opacity: 1;
        }

        .field-action-btn {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8c8c8c;
            cursor: pointer;
            transition: all 0.2s;
            background: #f5f5f5;
        }

        .field-action-btn:hover {
            background: #e6f7ff;
            color: #1890ff;
        }

        .property-panel {
            width: 280px;
            border-left: 1px solid #e8e8e8;
            background: #fff;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            overflow-y: auto;
        }

        .property-panel-header {
            padding: 12px 16px;
            border-bottom: 1px solid #e8e8e8;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 10;
            height: 50px;
        }

        .property-panel-header h4 {
            margin: 0;
            font-size: 14px;
            color: #262626;
            font-weight: 500;
        }

        .property-content {
            padding: 16px;
            flex: 1;
            overflow-y: auto;
        }

        .property-placeholder {
            text-align: center;
            color: #8c8c8c;
            padding: 40px 0;
        }

        .property-section {
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .property-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .property-section-title {
            font-size: 13px;
            color: #262626;
            margin-bottom: 12px;
            padding-left: 8px;
            border-left: 2px solid #1890ff;
            font-weight: 500;
        }

        .property-item {
            margin-bottom: 12px;
        }

        .property-item:last-child {
            margin-bottom: 0;
        }

        .property-item label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: #262626;
            margin-bottom: 6px;
        }

        .property-item label .required {
            color: #f5222d;
            margin-right: 4px;
        }

        .property-item input,
        .property-item select,
        .property-item textarea {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            transition: all 0.3s;
            font-size: 13px;
            background: #fff;
            line-height: 1.5;
        }

        .property-item input:hover,
        .property-item select:hover,
        .property-item textarea:hover {
            border-color: #40a9ff;
        }

        .property-item input:focus,
        .property-item select:focus,
        .property-item textarea:focus {
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
            outline: none;
        }

        .help-text {
            font-size: 12px;
            color: #8c8c8c;
            margin-top: 4px;
        }

        .switch-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 36px;
            height: 20px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }

        .switch-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .switch-slider {
            background-color: #1890ff;
        }

        input:checked + .switch-slider:before {
            transform: translateX(16px);
        }

        .field-preview {
            padding: 12px;
            background: #fafafa;
            border-radius: 4px;
            border: 1px solid #f0f0f0;
            margin-top: 8px;
        }

        .field-preview input[type="text"],
        .field-preview textarea,
        .field-preview select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: #fff;
            color: #595959;
            font-size: 14px;
            transition: all 0.3s;
        }

        .field-preview input[disabled],
        .field-preview textarea[disabled],
        .field-preview select[disabled] {
            background: #f5f5f5;
            cursor: not-allowed;
            color: #bfbfbf;
        }

        .option-list {
            margin-top: 8px;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .option-item input {
            flex: 1;
        }

        .option-item .btn-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8c8c8c;
            cursor: pointer;
            border-radius: 4px;
        }

        .option-item .btn-icon:hover {
            background: #f5f5f5;
            color: #1890ff;
        }

        .btn-text-primary {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #1890ff;
            background: none;
            border: none;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 13px;
            border-radius: 4px;
        }

        .btn-text-primary:hover {
            background: #e6f7ff;
        }

        * {
            box-sizing: border-box;
        }

        .workflow-design {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: #f0f2f5;
        }

        .workflow-toolbar {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background: #fff;
            border-bottom: 1px solid #e8e8e8;
            height: 56px;
        }

        .workflow-title {
            font-size: 16px;
            color: #262626;
            font-weight: 500;
            margin-right: 24px;
            display: flex;
            align-items: center;
        }

        .workflow-title i {
            margin-right: 8px;
            color: #1890ff;
        }

        .workflow-tools {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .workflow-tool {
            display: flex;
            align-items: center;
            padding: 6px 16px;
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            cursor: pointer;
            color: #595959;
            font-size: 14px;
            transition: all 0.2s;
        }

        .workflow-tool i {
            margin-right: 6px;
            font-size: 16px;
            color: #1890ff;
        }

        .workflow-tool:hover {
            color: #1890ff;
            border-color: #1890ff;
            background: #f0f7ff;
        }

        .workflow-tool.active {
            color: #1890ff;
            border-color: #1890ff;
            background: #e6f7ff;
        }

        .workflow-canvas-container {
            flex: 1;
            position: relative;
            overflow: auto;
        }

        .workflow-canvas {
            flex: 1;
            padding: 40px;
            background: #f0f2f5;
            min-height: 600px;
            position: relative;
            overflow: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1000px;
            margin: 0 auto;
        }

        .node {
            background: #fff;
            border-radius: 4px;
            padding: 12px 16px;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #e8e8e8;
        }

        .node:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            border-color: #40a9ff;
        }

        .node.selected {
            border: 2px solid #1890ff;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
        }

        .node-icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 14px;
            border-radius: 4px;
        }

        .node-title {
            flex: 1;
            font-size: 14px;
            color: #262626;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .node-arrow {
            color: #8c8c8c;
            font-size: 14px;
        }

        .node-action {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8c8c8c;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 4px;
        }

        .node:hover .node-action {
            opacity: 1;
        }

        .node-action:hover {
            background: #f5f5f5;
            color: #262626;
        }

        .node-connector {
            width: 2px;
            height: 30px;
            background: #c0c0c0;
            margin: 2px auto;
            position: relative;
        }

        .node-add {
            margin: 8px auto;
            position: relative;
            width: 300px;
            display: flex;
            justify-content: center;
        }

        .node-add-btn {
            width: 28px;
            height: 28px;
            background: #fff;
            border: 1px dashed #1890ff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1890ff;
            cursor: pointer;
            position: relative;
            z-index: 2;
            transition: all 0.3s;
        }

        .node-add-btn:hover {
            background: #f0f7ff;
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(24,144,255,0.2);
        }

        .node-add-menu {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 8px;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            display: none;
            z-index: 3;
            min-width: 160px;
            border: 1px solid #e8e8e8;
            padding: 4px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.3s;
            color: #262626;
            font-size: 14px;
        }

        .menu-item:hover {
            background: #f0f7ff;
            color: #1890ff;
        }

        .menu-item i {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .start-node {
            background: #f0f7ff;
            border-color: #91d5ff;
        }

        .start-node .node-icon {
            background: #1890ff;
        }

        .end-node {
            background: #f9f9f9;
            border-color: #d9d9d9;
        }

        .end-node .node-icon {
            background: #8c8c8c;
        }

        .approval-node .node-icon {
            background: #52c41a;
        }

        .notify-node .node-icon {
            background: #fa8c16;
        }

        .condition-node .node-icon {
            background: #722ed1;
        }

        .process-node .node-icon {
            background: #eb2f96;
        }

        .trigger-node .node-icon {
            background: #2f54eb;
        }

        .user-node .node-icon {
            background: #13c2c2;
        }

        .workflow-branch {
            width: 100%;
            margin: 0;
            position: relative;
        }

        .add-condition {
            position: relative;
            margin: 8px 0;
            text-align: center;
        }

        .add-condition-btn {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 12px;
            cursor: pointer;
            color: #1890ff;
            font-size: 13px;
            transition: all 0.3s;
            position: relative;
            z-index: 2;
        }

        .add-condition-btn:hover {
            background: #f0f7ff;
            border-color: #1890ff;
        }

        .add-condition-btn i {
            margin-right: 4px;
        }

        .add-condition::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 2px;
            height: 20px;
            background: #c0c0c0;
            z-index: 1;
        }

        .branch-condition {
            display: flex;
            justify-content: center;
            gap: 20px;
            position: relative;
            padding-top: 30px;
            margin: 0 auto;
            max-width: 1000px;
        }

        .branch-condition::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 30px;
            background: #c0c0c0;
        }

        .condition-node {
            flex: 1;
            max-width: 340px;
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            padding: 16px;
            transition: all 0.3s;
            position: relative;
        }

        .condition-node::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%) rotate(45deg);
            width: 16px;
            height: 16px;
            background: #fff;
            border-top: 1px solid #e8e8e8;
            border-left: 1px solid #e8e8e8;
            z-index: 1;
        }

        .condition-node:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-color: #40a9ff;
        }

        .condition-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            color: #8c8c8c;
            font-size: 13px;
        }

        .condition-content {
            padding: 8px 12px;
            background: #fafafa;
            border-radius: 4px;
            font-size: 14px;
            color: #262626;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #f0f0f0;
        }

        .condition-content:hover {
            background: #f0f7ff;
            border-color: #1890ff;
        }

        .workflow-property-panel {
            width: 400px;
            background: #fff;
            border-left: 1px solid #e8e8e8;
            position: fixed;
            right: 0;
            top: 0;
            bottom: 0;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
            z-index: 1000;
            box-shadow: -2px 0 8px rgba(0,0,0,0.1);
            display: none;
            overflow-y: auto;
        }

        .workflow-property-panel.show {
            transform: translateX(0);
        }

        .property-panel-header {
            padding: 16px;
            border-bottom: 1px solid #e8e8e8;
            background: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .property-panel-header h4 {
            margin: 0;
            font-size: 16px;
            color: #262626;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .property-panel-header h4 i {
            margin-right: 8px;
        }

        .property-panel-header .close-btn {
            cursor: pointer;
            color: #8c8c8c;
            font-size: 16px;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .property-panel-header .close-btn:hover {
            background: #f0f0f0;
            color: #262626;
        }

        .property-panel-content {
            padding: 0;
        }

        .property-panel-tabs {
            display: flex;
            border-bottom: 1px solid #e8e8e8;
        }

        .property-panel-tab {
            flex: 1;
            text-align: center;
            padding: 12px 16px;
            font-size: 14px;
            color: #595959;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .property-panel-tab.active {
            color: #1890ff;
        }

        .property-panel-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: #1890ff;
        }

        .property-panel-content-inner {
            padding: 16px;
        }

        .approval-type {
            margin-bottom: 20px;
        }

        .approval-type-title {
            font-size: 14px;
            color: #262626;
            margin-bottom: 12px;
        }

        .approval-type-options {
            display: flex;
            gap: 16px;
        }

        .approval-type-option {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .approval-type-option input {
            margin: 0;
        }

        .approval-tabs {
            margin-top: 16px;
        }

        .approver-selector {
            margin-top: 16px;
        }

        .approver-selector-title {
            font-size: 14px;
            color: #262626;
            margin-bottom: 16px;
        }

        .approver-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 16px;
        }

        .approver-category {
            width: calc(33.33% - 8px);
        }

        .approver-category-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 12px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
            transition: all 0.3s;
        }

        .approver-category-btn:hover {
            border-color: #40a9ff;
            background: #f0f7ff;
        }

        .approver-category-btn.active {
            border-color: #1890ff;
            background: #e6f7ff;
        }

        .approver-category-btn i {
            font-size: 20px;
            color: #1890ff;
            margin-bottom: 8px;
        }

        .approver-category-btn span {
            font-size: 14px;
            color: #262626;
        }

        .approver-options {
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .approver-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .approver-option:last-child {
            margin-bottom: 0;
        }

        .approver-option input {
            margin: 0;
        }

        .approver-option span {
            font-size: 14px;
            color: #262626;
        }

        .approver-option i.help {
            color: #8c8c8c;
            cursor: pointer;
        }

        .approver-option i.help:hover {
            color: #1890ff;
        }

        .member-selector {
            margin-top: 16px;
        }

        .member-input {
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            padding: 8px 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            min-height: 80px;
            background: #fff;
            transition: all 0.3s;
        }

        .member-input:hover {
            border-color: #40a9ff;
        }

        .member-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #f0f7ff;
            color: #1890ff;
            padding: 4px 8px;
            border-radius: 2px;
            margin-right: 6px;
            margin-bottom: 6px;
            transition: all 0.3s;
        }

        .member-tag i {
            cursor: pointer;
            font-size: 12px;
        }

        .member-limit {
            margin-top: 8px;
            font-size: 12px;
            color: #8c8c8c;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px;
            background: #fafafa;
            border-radius: 4px;
        }

        .member-limit a {
            color: #1890ff;
            text-decoration: none;
        }

        .member-limit a:hover {
            text-decoration: underline;
        }

        .btn-group {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            padding: 16px;
            border-top: 1px solid #e8e8e8;
            background: #fff;
            position: sticky;
            bottom: 0;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-default {
            background: #fff;
            border: 1px solid #d9d9d9;
            color: #595959;
        }

        .btn-default:hover {
            color: #40a9ff;
            border-color: #40a9ff;
        }

        .btn-primary {
            background: #1890ff;
            border: 1px solid #1890ff;
            color: #fff;
        }

        .btn-primary:hover {
            background: #40a9ff;
            border-color: #40a9ff;
        }

        /* 高级设置样式 */
        .settings-layout {
            display: flex;
            height: calc(100vh - 180px);
            background: #fff;
        }

        .settings-sidebar {
            width: 180px;
            background: #f9f9f9;
            border-right: 1px solid #e8e8e8;
            flex-shrink: 0;
        }

        .settings-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .settings-menu-item {
            padding: 14px 16px;
            font-size: 14px;
            color: #595959;
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .settings-menu-item:hover {
            background: #f0f0f0;
            color: #262626;
        }

        .settings-menu-item.active {
            background: #e6f7ff;
            color: #1890ff;
            border-left-color: #1890ff;
            font-weight: 500;
        }

        .settings-content {
            flex: 1;
            padding: 24px;
            overflow: auto;
        }

        .settings-section {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid #f0f0f0;
        }

        .settings-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .settings-section-title {
            font-size: 16px;
            color: #262626;
            margin: 0 0 8px 0;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .settings-section-desc {
            color: #8c8c8c;
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .settings-option {
            display: flex;
            gap: 24px;
            margin-bottom: 16px;
        }

        .radio-container {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
            color: #262626;
        }

        .radio-text {
            margin-left: 8px;
        }

        .settings-input-container {
            margin-bottom: 8px;
        }

        .settings-input {
            width: 100%;
            max-width: 700px;
            padding: 8px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
        }

        .settings-input:focus {
            border-color: #40a9ff;
            outline: 0;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
        }

        .settings-input[disabled] {
            background-color: #f5f5f5;
            cursor: not-allowed;
            color: rgba(0, 0, 0, 0.65);
        }

        .settings-desc {
            font-size: 13px;
            color: #8c8c8c;
            margin-top: 8px;
        }

        .settings-checkbox-option {
            margin-bottom: 16px;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            font-size: 14px;
            color: #262626;
            cursor: pointer;
        }

        .checkbox-text {
            margin-left: 8px;
        }

        .help-icon {
            color: #8c8c8c;
            margin-left: 8px;
            cursor: pointer;
        }

        .help-icon:hover {
            color: #1890ff;
        }

        .settings-tag {
            display: inline-block;
            background: #fff2e8;
            border: 1px solid #ffbb96;
            color: #fa541c;
            font-size: 12px;
            padding: 0 6px;
            border-radius: 2px;
            margin-left: 8px;
            line-height: 18px;
        }

        .settings-tag-blue {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            color: #1890ff;
        }

        .settings-edit-btn {
            display: inline-block;
            margin-left: 8px;
            padding: 4px 15px;
            font-size: 14px;
            border-radius: 4px;
            background: #fff;
            border: 1px solid #d9d9d9;
            color: #595959;
            cursor: pointer;
            transition: all 0.3s;
        }

        .settings-edit-btn:hover {
            color: #40a9ff;
            border-color: #40a9ff;
        }

        /* 设备预览样式 */
        .device-preview {
            display: none;
            padding: 20px;
        }

        .device-preview.active {
            display: block;
        }

        /* PC端预览样式 */
        .pc-preview {
            width: 100%;
        }

        .form-preview-container {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .form-title {
            font-size: 16px;
            font-weight: 500;
            color: #262626;
        }

        .form-toolbar {
            display: flex;
            gap: 8px;
        }

        .form-toolbar-btn {
            display: flex;
            align-items: center;
            padding: 6px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: #fff;
            font-size: 12px;
            color: #595959;
            cursor: pointer;
            transition: all 0.2s;
        }

        .form-toolbar-btn i {
            margin-right: 4px;
            font-size: 12px;
        }

        .form-toolbar-btn:hover {
            color: #1890ff;
            border-color: #1890ff;
        }

        .form-fields {
            padding: 16px;
        }

        .preview-field {
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .preview-field:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .field-label {
            font-size: 14px;
            color: #262626;
            margin-bottom: 8px;
        }

        .required-mark {
            color: #f5222d;
            margin-right: 4px;
        }

        .field-control {
            display: flex;
            align-items: center;
        }

        .field-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
            color: #bfbfbf;
        }

        .field-arrow {
            margin-left: 8px;
            color: #8c8c8c;
        }

        .field-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            border: 1px dashed #d9d9d9;
            border-radius: 4px;
            background: #fafafa;
            cursor: pointer;
        }

        .upload-placeholder {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            border-radius: 4px;
            margin-bottom: 8px;
        }

        .upload-placeholder i {
            font-size: 20px;
            color: #8c8c8c;
        }

        .upload-text {
            font-size: 12px;
            color: #8c8c8c;
            text-align: center;
        }

        /* 手机端预览样式 */
        .mobile-preview {
            display: flex;
            justify-content: center;
        }

        .mobile-container {
            width: 375px;
            height: 667px;
            background: #fff;
            border-radius: 24px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            overflow: hidden;
            position: relative;
            border: 10px solid #333;
        }

        .mobile-header {
            background: #1890ff;
            padding: 16px;
            color: #fff;
        }

        .mobile-status-bar {
            height: 20px;
            margin-bottom: 8px;
        }

        .mobile-title {
            font-size: 18px;
            font-weight: 500;
            text-align: center;
        }

        .mobile-content {
            height: calc(100% - 80px);
            overflow-y: auto;
        }

        .mobile-fields {
            padding: 16px;
        }

        .mobile-field {
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .mobile-field:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .mobile-field-label {
            font-size: 14px;
            color: #262626;
            margin-bottom: 8px;
        }

        .mobile-field-control {
            display: flex;
            align-items: center;
        }

        .mobile-field-input {
            flex: 1;
            padding: 10px 12px;
            background: #f5f5f5;
            border-radius: 4px;
            font-size: 14px;
            color: #bfbfbf;
        }

        .mobile-field-arrow {
            margin-left: 8px;
            color: #8c8c8c;
        }

        .mobile-field-upload {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            border-radius: 4px;
            color: #8c8c8c;
            font-size: 24px;
        }

        /* 预览字段选中状态 */
        .preview-field.selected, .mobile-field.selected {
            border: 2px solid #1890ff;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
            border-radius: 4px;
        }

        /* 确保属性面板在任何时候都可见 */
        .property-panel {
            z-index: 100;
        }

        /* 预览字段的可点击交互 */
        .preview-field, .mobile-field {
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .preview-field:hover, .mobile-field:hover {
            background-color: #f0f7ff;
        }

        /* 直接针对移动端预览框的样式 */
        .mobile-device-frame, 
        [class*="mobile-preview"], 
        .mobile-form-preview,
        .mobile-device-content,
        .mobile-form-content {
            display: none !important;
        }

        /* 当选择电脑端时确保移动端预览隐藏 */
        .device-desktop-active .mobile-device-frame,
        .device-desktop-active [class*="mobile-preview"],
        .device-desktop-active .mobile-form-preview {
            display: none !important;
        }
    </style>
</head>

<body>
    <div class="wizard-container">
        <div class="wizard-header">
            <div class="wizard-logo">
                <i class="fas fa-project-diagram"></i>
                <span>请假</span>
            </div>
            <div class="wizard-steps">
                <div class="wizard-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-title">基础设置</div>
                </div>
                <div class="wizard-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-title">表单设计</div>
                </div>
                <div class="wizard-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-title">流程设计</div>
                </div>
                <div class="wizard-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-title">高级设置</div>
                </div>
            </div>
            <div class="wizard-actions">
                <div class="wizard-buttons">
                    <button class="btn-secondary">上一步</button>
                    <button class="btn-primary step-btn">下一步</button>
                </div>
                <button class="btn-primary publish-btn">发布</button>
            </div>
        </div>

        <div class="wizard-content">
            <!-- 步骤1: 基础设置内容 -->
            <div class="wizard-step-content" id="step-1-content">
                <div class="basic-settings">
                    <div class="form-group">
                        <label><span class="required">*</span> 流程名称</label>
                        <input type="text" placeholder="请输入流程名称" value="请假">
                    </div>
                    <div class="form-group">
                        <label><span class="required">*</span> 所在分组</label>
                        <select>
                            <option>出差休假</option>
                            <option>财务报销</option>
                            <option>行政人事</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>流程说明</label>
                        <textarea placeholder="适用于请假审批" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label><span class="required">*</span> 谁可以发起</label>
                        <select>
                            <option>佛山市英佳信息品牌有限公司</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>模板管理员</label>
                        <select>
                            <option>任何人都可以</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <a href="#" class="link-primary">权限管理 <i class="fas fa-chevron-right"></i></a>
                    </div>
                </div>

                <div class="section-divider">
                    <span>快速选择模板</span>
                </div>
                <!--  待选模板 -->
                <div class="template-container" id="templateApp">
                    <div class="template-list">
                        <div class="template-card" 
                             v-for="template in templates" 
                             :key="template.id" 
                             :class="{'selected': selectedTemplate === template.id}"
                             @click="selectTemplate(template.id)">
                            <div class="template-icon">
                                <i class="fas" :class="getTemplateIcon(template.id)"></i>
                            </div>
                            <h4>{{template.name}}</h4>
                            <p>{{template.description}}</p>
                            <div class="selected-mark"></div>
                            <div class="selected-icon">
                                <i class="fas fa-check"></i>
                        </div>
                            </div>
                        </div>
                </div>
            </div>

            <!-- 步骤2: 表单设计内容 -->
            <div class="wizard-step-content" id="step-2-content" style="display: none;">
                <div class="form-design">
                    <div class="form-design-container">
                        <div class="component-sidebar">
                            <div class="component-group">
                                <h4><i class="fas fa-cube"></i> 控件</h4>
                                <div class="component-items">
                                    <div class="component-item" draggable="true" data-type="text">
                                    <i class="fas fa-font"></i>
                                    <span>单行文本</span>
                                </div>
                                    <div class="component-item" draggable="true" data-type="textarea">
                                    <i class="fas fa-align-left"></i>
                                    <span>多行文本</span>
                                </div>
                                    <div class="component-item" draggable="true" data-type="number">
                                        <i class="fas fa-hashtag"></i>
                                        <span>数字输入</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="select">
                                    <i class="fas fa-list"></i>
                                    <span>下拉选择</span>
                                </div>
                                    <div class="component-item" draggable="true" data-type="radio">
                                        <i class="fas fa-dot-circle"></i>
                                        <span>单选框</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="checkbox">
                                        <i class="fas fa-check-square"></i>
                                        <span>多选框</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="date">
                                        <i class="fas fa-calendar"></i>
                                        <span>日期选择</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="time">
                                        <i class="fas fa-clock"></i>
                                        <span>时间选择</span>
                                    </div>
                                </div>
                            </div>
                            <div class="component-group">
                                <h4><i class="fas fa-th-large"></i> 布局控件</h4>
                                <div class="component-items">
                                    <div class="component-item" draggable="true" data-type="section">
                                        <i class="fas fa-grip-horizontal"></i>
                                        <span>分栏</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="divider">
                                        <i class="fas fa-minus"></i>
                                        <span>分割线</span>
                                    </div>
                                </div>
                            </div>
                            <div class="component-group">
                                <h4><i class="fas fa-star"></i> 高级控件</h4>
                                <div class="component-items">
                                    <div class="component-item" draggable="true" data-type="upload">
                                        <i class="fas fa-upload"></i>
                                        <span>文件上传</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="image">
                                        <i class="fas fa-image"></i>
                                        <span>图片</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="user">
                                        <i class="fas fa-user"></i>
                                        <span>人员选择</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="dept">
                                        <i class="fas fa-sitemap"></i>
                                        <span>部门选择</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="address">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>地址</span>
                                    </div>
                                    <div class="component-item" draggable="true" data-type="table">
                                        <i class="fas fa-table"></i>
                                        <span>明细表格</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-canvas">
                            <div class="form-canvas-header">
                                <div class="form-canvas-title">表单设计</div>
                                <div class="form-canvas-device-switch">
                                    <div class="device-switch-btn active" data-device="pc">
                                        <i class="fas fa-desktop"></i>
                                        <span>电脑端</span>
                                    </div>
                                    <div class="device-switch-btn" data-device="mobile">
                                        <i class="fas fa-mobile-alt"></i>
                                        <span>手机端</span>
                                    </div>
                                </div>
                                <div class="form-canvas-actions">
                                    <div class="form-canvas-action" title="撤销">
                                        <i class="fas fa-undo"></i>
                                    </div>
                                    <div class="form-canvas-action" title="重做">
                                        <i class="fas fa-redo"></i>
                                    </div>
                                    <div class="form-canvas-action" title="预览">
                                        <i class="fas fa-eye"></i>
                                    </div>
                                    <div class="form-canvas-action" title="导入">
                                        <i class="fas fa-file-import"></i>
                                    </div>
                                    <div class="form-canvas-action" title="导出">
                                        <i class="fas fa-file-export"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-canvas-content" id="formCanvas">
                                <div class="form-design-area">
                                    <div class="device-preview pc-preview active">
                                        <!-- PC端预览 -->
                                        <div class="form-preview-container">
                                            <div class="form-header">
                                                <div class="form-title">请假申请</div>
                                                <div class="form-toolbar">
                                                    <button class="form-toolbar-btn"><i class="fas fa-link"></i> 连接数据</button>
                                                    <button class="form-toolbar-btn"><i class="fas fa-cog"></i> 填充设置</button>
                                                </div>
                                            </div>
                                            <div class="form-fields">
                                                <!-- 示例字段 -->
                                                <div class="preview-field" data-field-id="field-1" onclick="selectPreviewField(this, 'text')">
                                                    <div class="field-label"><span class="required-mark">*</span>请假类型</div>
                                                    <div class="field-control">
                                                        <div class="field-input">待填写者输入</div>
                                                        <div class="field-arrow"><i class="fas fa-chevron-right"></i></div>
                                                    </div>
                                                </div>
                                                <div class="preview-field" data-field-id="field-2" onclick="selectPreviewField(this, 'date')">
                                                    <div class="field-label"><span class="required-mark">*</span>开始时间</div>
                                                    <div class="field-control">
                                                        <div class="field-input">请选择</div>
                                                        <div class="field-arrow"><i class="fas fa-chevron-right"></i></div>
                                                    </div>
                                                </div>
                                                <div class="preview-field" data-field-id="field-3" onclick="selectPreviewField(this, 'date')">
                                                    <div class="field-label"><span class="required-mark">*</span>结束时间</div>
                                                    <div class="field-control">
                                                        <div class="field-input">请选择</div>
                                                        <div class="field-arrow"><i class="fas fa-chevron-right"></i></div>
                                                    </div>
                                                </div>
                                                <div class="preview-field" data-field-id="field-4" onclick="selectPreviewField(this, 'number')">
                                                    <div class="field-label"><span class="required-mark">*</span>请假天数（天）</div>
                                                    <div class="field-control">
                                                        <div class="field-input">请输入请假天数</div>
                                                    </div>
                                                </div>
                                                <div class="preview-field" data-field-id="field-5" onclick="selectPreviewField(this, 'textarea')">
                                                    <div class="field-label"><span class="required-mark">*</span>请假事由</div>
                                                    <div class="field-control">
                                                        <div class="field-input">请输入请假事由</div>
                                                    </div>
                                                </div>
                                                <div class="preview-field" data-field-id="field-6" onclick="selectPreviewField(this, 'image')">
                                                    <div class="field-label">图片</div>
                                                    <div class="field-control">
                                                        <div class="field-upload">
                                                            <div class="upload-placeholder">
                                                                <i class="fas fa-plus"></i>
                                                            </div>
                                                            <div class="upload-text">点击或拖拽图片/控件到至此处</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="device-preview mobile-preview">
                                        <!-- 手机端预览 -->
                                        <div class="mobile-container">
                                            <div class="mobile-header">
                                                <div class="mobile-status-bar"></div>
                                                <div class="mobile-title">请假申请</div>
                                            </div>
                                            <div class="mobile-content">
                                                <div class="mobile-fields">
                                                    <!-- 示例字段 -->
                                                    <div class="mobile-field" data-field-id="field-1" onclick="selectPreviewField(this, 'text')">
                                                        <div class="mobile-field-label"><span class="required-mark">*</span>请假类型</div>
                                                        <div class="mobile-field-control">
                                                            <div class="mobile-field-input">待填写者输入</div>
                                                            <div class="mobile-field-arrow"><i class="fas fa-chevron-right"></i></div>
                                                        </div>
                                                    </div>
                                                    <div class="mobile-field" data-field-id="field-2" onclick="selectPreviewField(this, 'date')">
                                                        <div class="mobile-field-label"><span class="required-mark">*</span>开始时间</div>
                                                        <div class="mobile-field-control">
                                                            <div class="mobile-field-input">请选择</div>
                                                            <div class="mobile-field-arrow"><i class="fas fa-chevron-right"></i></div>
                                                        </div>
                                                    </div>
                                                    <div class="mobile-field" data-field-id="field-3" onclick="selectPreviewField(this, 'date')">
                                                        <div class="mobile-field-label"><span class="required-mark">*</span>结束时间</div>
                                                        <div class="mobile-field-control">
                                                            <div class="mobile-field-input">请选择</div>
                                                            <div class="mobile-field-arrow"><i class="fas fa-chevron-right"></i></div>
                                                        </div>
                                                    </div>
                                                    <div class="mobile-field" data-field-id="field-4" onclick="selectPreviewField(this, 'number')">
                                                        <div class="mobile-field-label"><span class="required-mark">*</span>请假天数（天）</div>
                                                        <div class="mobile-field-control">
                                                            <div class="mobile-field-input">请输入请假天数</div>
                                                        </div>
                                                    </div>
                                                    <div class="mobile-field" data-field-id="field-5" onclick="selectPreviewField(this, 'textarea')">
                                                        <div class="mobile-field-label"><span class="required-mark">*</span>请假事由</div>
                                                        <div class="mobile-field-control">
                                                            <div class="mobile-field-input">请输入请假事由</div>
                                                        </div>
                                                    </div>
                                                    <div class="mobile-field" data-field-id="field-6" onclick="selectPreviewField(this, 'image')">
                                                        <div class="mobile-field-label">图片</div>
                                                        <div class="mobile-field-control">
                                                            <div class="mobile-field-upload">
                                                                <i class="fas fa-plus"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-placeholder" style="display: none;">
                                        <div class="placeholder-icon">
                                <i class="fas fa-plus-circle"></i>
                                        </div>
                                        <div class="placeholder-text">拖拽组件到这里开始设计表单</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="property-panel">
                            <div class="property-panel-header">
                                <h4>属性设置</h4>
                            </div>
                            <div class="property-content" id="propertyContent">
                                <div class="property-placeholder">
                                    <p>请选择一个组件来设置属性</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 步骤3: 流程设计内容 -->
            <div class="wizard-step-content" id="step-3-content" style="display: none;">
                <div class="workflow-design">
                    <div class="workflow-toolbar">
                        <div class="workflow-title">
                            <i class="fas fa-project-diagram"></i>
                            请假
                    </div>
                        <div class="workflow-tools">
                            <div class="workflow-tool">
                                <i class="fas fa-th-list"></i>
                                选择模板
                            </div>
                            <div class="workflow-tool">
                                <i class="fas fa-magic"></i>
                                预设审批
                            </div>
                            <div class="workflow-tool">
                                <i class="fas fa-random"></i>
                                动态审批
                            </div>
                            <div class="workflow-tool">
                                <i class="fas fa-sitemap"></i>
                                导出流程图
                            </div>
                        </div>
                    </div>
                    <div class="workflow-canvas-container">
                    <div class="workflow-canvas">
                        <div class="node start-node">
                                <div class="node-icon"><i class="fas fa-play"></i></div>
                                <div class="node-title">发起人</div>
                        </div>
                        <div class="node-connector"></div>
                            <div class="node approval-node" onclick="showNodePanel(this, 'approval')">
                            <div class="node-icon"><i class="fas fa-user-check"></i></div>
                            <div class="node-title">审批人</div>
                                <div class="node-arrow"><i class="fas fa-chevron-right"></i></div>
                            </div>
                            <div class="node-add">
                                <div class="node-add-btn" onclick="toggleNodeMenu(this)">
                                    <i class="fas fa-plus"></i>
                                </div>
                                <div class="node-add-menu">
                                    <div class="menu-item" onclick="addNode('approval')">
                                        <i class="fas fa-user-check"></i>
                                        <span>审批人</span>
                                    </div>
                                    <div class="menu-item" onclick="addNode('notify')">
                                        <i class="fas fa-bell"></i>
                                        <span>抄送人</span>
                                    </div>
                                    <div class="menu-item" onclick="addNode('condition')">
                                        <i class="fas fa-code-branch"></i>
                                        <span>条件分支</span>
                                    </div>
                                    <div class="menu-item" onclick="addNode('process')">
                                        <i class="fas fa-cog"></i>
                                        <span>处理</span>
                                    </div>
                                    <div class="menu-item" onclick="addNode('user')">
                                        <i class="fas fa-user"></i>
                                        <span>人事</span>
                                    </div>
                                </div>
                            </div>
                            <div class="add-condition">
                                <div class="add-condition-btn" onclick="addConditionBranch()">
                                    <i class="fas fa-plus"></i>添加条件
                                </div>
                            </div>
                            <div class="workflow-branch">
                                <div class="branch-condition">
                                    <div class="condition-node">
                                        <div class="condition-header">
                                            <span>条件1</span>
                                            <span>优先级1</span>
                                        </div>
                                        <div class="condition-content" onclick="showNodePanel(this.parentNode, 'condition')">
                                            请假天数（天）< 1
                                        </div>
                                        <div class="node-connector"></div>
                                        <div class="node approval-node" onclick="showNodePanel(this, 'approval')">
                                            <div class="node-icon"><i class="fas fa-user-check"></i></div>
                                            <div class="node-title">直接主管</div>
                                            <div class="node-arrow"><i class="fas fa-chevron-right"></i></div>
                                        </div>
                                        <div class="node-add">
                                            <div class="node-add-btn" onclick="toggleNodeMenu(this)">
                                                <i class="fas fa-plus"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="condition-node">
                                        <div class="condition-header">
                                            <span>条件2</span>
                                            <span>优先级2</span>
                                        </div>
                                        <div class="condition-content" onclick="showNodePanel(this.parentNode, 'condition')">
                                            请假天数（天）≥ 1
                                        </div>
                                        <div class="node-connector"></div>
                                        <div class="node approval-node" onclick="showNodePanel(this, 'approval')">
                                            <div class="node-icon"><i class="fas fa-user-check"></i></div>
                                            <div class="node-title">部门主管</div>
                                            <div class="node-arrow"><i class="fas fa-chevron-right"></i></div>
                                        </div>
                                        <div class="node-add">
                                            <div class="node-add-btn" onclick="toggleNodeMenu(this)">
                                                <i class="fas fa-plus"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>
                        <div class="node-connector"></div>
                        <div class="node end-node">
                                <div class="node-icon"><i class="fas fa-flag"></i></div>
                            <div class="node-title">结束</div>
                            </div>
                        </div>
                    </div>
                    <div class="workflow-property-panel" id="workflowPropertyPanel">
                        <div class="property-panel-header">
                            <h4><i class="fas fa-user-check"></i> 审批人</h4>
                            <div class="close-btn" onclick="closePropertyPanel()">
                                <i class="fas fa-times"></i>
                            </div>
                        </div>
                        <div class="property-panel-tabs">
                            <div class="property-panel-tab active">设置审批人</div>
                            <div class="property-panel-tab">高级设置</div>
                        </div>
                        <div class="property-panel-content">
                            <div class="property-panel-content-inner">
                                <div class="approval-type">
                                    <div class="approval-type-title">审批类型</div>
                                    <div class="approval-type-options">
                                        <label class="approval-type-option">
                                            <input type="radio" name="approvalType" value="manual" checked>
                                            <span>人工审批</span>
                                        </label>
                                        <label class="approval-type-option">
                                            <input type="radio" name="approvalType" value="auto">
                                            <span>自动通过</span>
                                        </label>
                                        <label class="approval-type-option">
                                            <input type="radio" name="approvalType" value="reject">
                                            <span>自动拒绝</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="approver-selector">
                                    <div class="approver-selector-title">请选择该节点的审批人</div>
                                    <div class="approver-list">
                                        <div class="approver-category">
                                            <div class="approver-category-btn active">
                                                <i class="fas fa-user"></i>
                                                <span>常用审批人</span>
                                            </div>
                                        </div>
                                        <div class="approver-category">
                                            <div class="approver-category-btn">
                                                <i class="fas fa-users"></i>
                                                <span>主管</span>
                                            </div>
                                        </div>
                                        <div class="approver-category">
                                            <div class="approver-category-btn">
                                                <i class="fas fa-ellipsis-h"></i>
                                                <span>其他</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="approver-options">
                                        <div class="approver-option">
                                            <input type="radio" name="approver" value="specified" checked>
                                            <span>指定成员</span>
                                        </div>
                                        <div class="approver-option">
                                            <input type="radio" name="approver" value="initiator">
                                            <span>发起人自己</span>
                                        </div>
                                        <div class="approver-option">
                                            <input type="radio" name="approver" value="initiatorSelect">
                                            <span>发起人自选</span>
                                            <i class="fas fa-question-circle help"></i>
                                        </div>
                                        <div class="approver-option">
                                            <input type="radio" name="approver" value="role">
                                            <span>角色</span>
                                            <i class="fas fa-question-circle help"></i>
                                        </div>
                                    </div>
                                    <div class="member-selector">
                                        <div class="member-input">
                                            <span class="member-tag">
                                                郭晨泳
                                                <i class="fas fa-times"></i>
                                            </span>
                                        </div>
                                        <div class="member-limit">
                                            <i class="fas fa-info-circle"></i>
                                            当前选择成员上限50人，升级OA审批版本后，最高可支持到100人
                                            <a href="#">查看详情</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-default" onclick="closePropertyPanel()">取消</button>
                            <button class="btn btn-primary">保存</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 步骤4: 高级设置内容 -->
            <div class="wizard-step-content" id="step-4-content" style="display: none;">
                <div class="advanced-settings">
                    <div class="settings-layout">
                        <div class="settings-sidebar">
                            <ul class="settings-menu">
                                <li class="settings-menu-item">流程流转设置</li>
                                <li class="settings-menu-item active">数据展示设置</li>
                                <li class="settings-menu-item">主题样式</li>
                                <li class="settings-menu-item">提醒填写</li>
                                <li class="settings-menu-item">权限管理</li>
                                <li class="settings-menu-item">打印模板</li>
                            </ul>
                        </div>
                        <div class="settings-content">
                    <div class="settings-section">
                                <h3 class="settings-section-title">标题设置</h3>
                                <div class="settings-section-desc">通过设置标题的显示方式，快速识别一条记录</div>
                                
                                <div class="settings-option">
                                    <label class="radio-container">
                                        <input type="radio" name="titleMode" value="default" checked>
                                        <span class="radio-text">默认</span>
                                    </label>
                                    <label class="radio-container">
                                        <input type="radio" name="titleMode" value="custom">
                                        <span class="radio-text">自定义模式</span>
                                    </label>
                        </div>
                                
                                <div class="settings-input-container">
                                    <input type="text" class="settings-input" value="提交人 的 表单名称">
                            </div>
                                
                                <div class="settings-desc">
                                    示例：张三提交的出差申请，张三的请假
                        </div>
                            </div>
                            
                            <div class="settings-section">
                                <h3 class="settings-section-title">摘要设置</h3>
                                <div class="settings-section-desc">自定义表单摘要需要展示的值，用英文逗号分隔多个字段</div>
                                
                                <div class="settings-option">
                                    <label class="radio-container">
                                        <input type="radio" name="summaryMode" value="default" checked>
                                        <span class="radio-text">默认</span>
                                    </label>
                                    <label class="radio-container">
                                        <input type="radio" name="summaryMode" value="custom">
                                        <span class="radio-text">自定义模式</span>
                                        <span class="settings-tag">仅首</span>
                                    </label>
                        </div>
                                
                                <div class="settings-input-container">
                                    <input type="text" class="settings-input" value="默认设置（展示表单中前3个字段，必填字段优先）" disabled>
                                    <button class="settings-edit-btn">编辑</button>
                    </div>
                </div>
                            
                            <div class="settings-section">
                                <h3 class="settings-section-title">审批时长显示设置 <span class="settings-tag-blue">附加功能</span></h3>
                                <div class="settings-section-desc">记录历史处理者+提醒审批人的平均处理时长。在审批中可提醒审批人在合适的时间处理此流程</div>
                                
                                <div class="settings-checkbox-option">
                                    <label class="checkbox-container">
                                        <input type="checkbox" checked>
                                        <span class="checkbox-text">在审批单详情页显示审批人处理时长</span>
                                        <span class="help-icon"><i class="fas fa-question-circle"></i></span>
                                    </label>
                                </div>
                                
                                <div class="settings-checkbox-option">
                                    <label class="checkbox-container">
                                        <input type="checkbox" checked>
                                        <span class="checkbox-text">在消息卡片显示审批人处理时长</span>
                                        <span class="help-icon"><i class="fas fa-question-circle"></i></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部操作按钮已移至顶部 -->
    </div>

    <script>
        // 初始化Vue实例
        new Vue({
            el: '#templateApp',
            data: {
                selectedTemplate: null,
                templates: [
                    {
                        id: 1,
                        name: '普通请假',
                        description: '适用于常规请假申请'
                    },
                    {
                        id: 2,
                        name: '调休请假',
                        description: '加班后的调休申请'
                    },
                    {
                        id: 3,
                        name: '病假',
                        description: '因病请假，需要医疗证明'
                    },
                    {
                        id: 4,
                        name: '婚假',
                        description: '结婚相关的假期申请'
                    },
                    {
                        id: 5,
                        name: '产假',
                        description: '生育相关的假期申请'
                    }
                ]
            },
            methods: {
                selectTemplate(templateId) {
                    this.selectedTemplate = templateId;
                    console.log('选择了模板：', templateId);
                },
                getTemplateIcon(templateId) {
                    const icons = {
                        1: 'fa-calendar-alt',
                        2: 'fa-clock',
                        3: 'fa-hospital',
                        4: 'fa-ring',
                        5: 'fa-baby'
                    };
                    return icons[templateId] || 'fa-file-alt';
                }
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
            const steps = document.querySelectorAll('.wizard-step');
            const nextBtn = document.querySelector('.btn-primary:contains("下一步")');
            const prevBtn = document.querySelector('.btn-secondary:contains("上一步")');
            let currentStep = 1;
            const totalSteps = steps.length;

            // 步骤点击切换
            steps.forEach(step => {
                step.addEventListener('click', function () {
                    const stepNum = parseInt(this.getAttribute('data-step'));
                    activateStep(stepNum);
                });
            });

            // 下一步按钮
            document.querySelector('.wizard-actions .step-btn').addEventListener('click', function () {
                if (currentStep < totalSteps) {
                    activateStep(currentStep + 1);
                }
            });

            // 上一步按钮
            document.querySelector('.wizard-actions .btn-secondary').addEventListener('click', function () {
                if (currentStep > 1) {
                    activateStep(currentStep - 1);
                }
            });

            // 发布按钮
            document.querySelector('.wizard-actions .publish-btn').addEventListener('click', function () {
                alert('流程已发布！');
            });

            // 激活指定步骤
            function activateStep(stepNum) {
                currentStep = stepNum;

                // 更新步骤指示器
                steps.forEach(s => {
                    const num = parseInt(s.getAttribute('data-step'));
                    if (num === currentStep) {
                        s.classList.add('active');
                    } else {
                        s.classList.remove('active');
                    }
                });

                // 更新按钮状态
                document.querySelector('.wizard-actions .btn-secondary').style.visibility =
                    currentStep === 1 ? 'hidden' : 'visible';

                const nextButton = document.querySelector('.wizard-actions .step-btn');
                if (currentStep === totalSteps) {
                    nextButton.textContent = '完成';
                } else {
                    nextButton.textContent = '下一步';
                }

                // 显示/隐藏步骤内容
                document.querySelectorAll('.wizard-step-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById('step-' + currentStep + '-content').style.display = 'block';
            }

            // 初始化第一步
            activateStep(1);

            // 模板选择功能 - 小卡片
            const templateMiniCards = document.querySelectorAll('.template-mini-card');

            templateMiniCards.forEach(card => {
                // 跳过"更多模板"卡片
                if (card.getAttribute('data-template') === 'more') {
                    card.addEventListener('click', function () {
                        alert('即将显示更多模板选项');
                    });
                    return;
                }

                card.addEventListener('click', function () {
                    // 移除其他模板的选中状态
                    templateMiniCards.forEach(c => c.classList.remove('selected'));

                    // 添加当前模板的选中状态
                    this.classList.add('selected');

                    // 选中对应的radio按钮
                    const radioId = 'template-' + this.getAttribute('data-template');
                    document.getElementById(radioId).checked = true;

                    // 显示选中提示
                    const templateName = this.querySelector('.mini-card-title').textContent;
                    console.log('已选择模板：' + templateName);
                });
            });

            // 表单设计相关的JavaScript
            const formCanvas = document.getElementById('formCanvas');
            const components = document.querySelectorAll('.component-item');
            let selectedField = null;

            // 拖拽开始
            components.forEach(component => {
                component.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', component.getAttribute('data-type'));
                    component.classList.add('dragging');
                });

                component.addEventListener('dragend', () => {
                    component.classList.remove('dragging');
                });
            });

            // 画布拖拽事件
            formCanvas.addEventListener('dragover', (e) => {
                e.preventDefault();
                formCanvas.classList.add('dragover');
            });

            formCanvas.addEventListener('dragleave', () => {
                formCanvas.classList.remove('dragover');
            });

            formCanvas.addEventListener('drop', (e) => {
                e.preventDefault();
                formCanvas.classList.remove('dragover');
                const type = e.dataTransfer.getData('text/plain');
                addFormField(type);
            });

            // 设备预览切换
            document.addEventListener('DOMContentLoaded', function() {
                const deviceSwitchBtns = document.querySelectorAll('.device-switch-btn');
                
                deviceSwitchBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        // 移除所有按钮的激活状态
                        deviceSwitchBtns.forEach(b => b.classList.remove('active'));
                        
                        // 添加当前按钮的激活状态
                        this.classList.add('active');
                        
                        // 获取设备类型
                        const deviceType = this.getAttribute('data-device');
                        
                        // 隐藏所有预览
                        document.querySelectorAll('.device-preview').forEach(preview => {
                            preview.classList.remove('active');
                        });
                        
                        // 显示对应的预览
                        document.querySelector(`.${deviceType}-preview`).classList.add('active');
                        
                        console.log(`切换到${deviceType === 'pc' ? '电脑端' : '手机端'}预览`);
                    });
                });
                
                // 初始化表单设计区域
                initFormDesign();
            });

            // 初始化表单设计区域
            function initFormDesign() {
                // 隐藏占位符，显示默认表单
                const placeholder = document.querySelector('.form-placeholder');
                if (placeholder) {
                    placeholder.style.display = 'none';
                }
                
                // 可以在这里添加更多初始化逻辑
                console.log('表单设计区域初始化完成');
            }

            // 修改添加表单字段函数
            function addFormField(type) {
                const field = document.createElement('div');
                field.className = 'form-field';
                field.setAttribute('data-type', type);
                field.draggable = true;
                
                const componentInfo = getComponentInfo(type);
                field.innerHTML = `
                    <div class="field-actions">
                        <span class="field-action-btn move" title="拖动排序">
                            <i class="fas fa-arrows-alt"></i>
                        </span>
                        <span class="field-action-btn" title="复制" onclick="duplicateField(this)">
                            <i class="fas fa-copy"></i>
                        </span>
                        <span class="field-action-btn" title="删除" onclick="deleteField(this)">
                            <i class="fas fa-trash"></i>
                        </span>
                    </div>
                    <div class="field-header">
                        <i class="fas ${componentInfo.icon}"></i>
                        <span>${componentInfo.label}</span>
                    </div>
                    <div class="field-content">
                        ${componentInfo.preview}
                    </div>
                `;

                // 移除占位符
                const placeholder = formCanvas.querySelector('.form-placeholder');
                if (placeholder) {
                    placeholder.remove();
                }

                // 添加到PC和手机预览中
                updatePreviewWithNewField(type, componentInfo);

                // 字段点击事件
                field.addEventListener('click', (e) => {
                    if (!e.target.closest('.field-actions')) {
                        selectField(field);
                    }
                });

                // 拖拽排序事件
                field.addEventListener('dragstart', handleDragStart);
                field.addEventListener('dragend', handleDragEnd);
                field.addEventListener('dragover', handleDragOver);
                field.addEventListener('drop', handleDrop);
            }

            // 更新预览区域
            function updatePreviewWithNewField(type, componentInfo) {
                // 创建PC端预览字段
                const pcField = document.createElement('div');
                pcField.className = 'preview-field';
                pcField.innerHTML = `
                    <div class="field-label"><span class="required-mark">*</span>${componentInfo.label}</div>
                    <div class="field-control">
                        <div class="field-input">请输入${componentInfo.label}</div>
                        ${type === 'select' || type === 'date' || type === 'time' ? '<div class="field-arrow"><i class="fas fa-chevron-right"></i></div>' : ''}
                    </div>
                `;
                
                // 创建手机端预览字段
                const mobileField = document.createElement('div');
                mobileField.className = 'mobile-field';
                mobileField.innerHTML = `
                    <div class="mobile-field-label"><span class="required-mark">*</span>${componentInfo.label}</div>
                    <div class="mobile-field-control">
                        <div class="mobile-field-input">请输入${componentInfo.label}</div>
                        ${type === 'select' || type === 'date' || type === 'time' ? '<div class="mobile-field-arrow"><i class="fas fa-chevron-right"></i></div>' : ''}
                    </div>
                `;
                
                // 添加到预览区域
                document.querySelector('.form-fields').appendChild(pcField);
                document.querySelector('.mobile-fields').appendChild(mobileField);
            }

            // 选中字段
            function selectField(field) {
                if (selectedField) {
                    selectedField.classList.remove('selected');
                }
                selectedField = field;
                field.classList.add('selected');
                showProperties(field.getAttribute('data-type'));
            }

            // 显示属性面板
            function showProperties(type) {
                const propertyContent = document.getElementById('propertyContent');
                const componentInfo = getComponentInfo(type);
                
                propertyContent.innerHTML = `
                    <div class="property-item">
                        <label>字段标签</label>
                        <input type="text" value="${componentInfo.label}">
                    </div>
                    <div class="property-item">
                        <label>字段名称</label>
                        <input type="text" placeholder="请输入字段名称">
                    </div>
                    <div class="property-item">
                        <label>是否必填</label>
                        <select>
                            <option value="0">否</option>
                            <option value="1">是</option>
                        </select>
                    </div>
                    ${componentInfo.properties || ''}
                `;
            }

            // 修改获取组件信息函数
            function getComponentInfo(type) {
                const components = {
                    text: {
                        label: '单行文本',
                        icon: 'fa-font',
                        preview: `
                            <div class="field-preview">
                                <input type="text" placeholder="请输入" disabled>
                            </div>
                        `,
                        properties: `
                            <div class="property-section">
                                <div class="property-section-title">基础设置</div>
                                <div class="property-item">
                                    <label>
                                        <span><span class="required">*</span> 字段标签</span>
                                        <i class="fas fa-question-circle help-icon" title="显示在表单中的字段名称"></i>
                                    </label>
                                    <input type="text" value="单行文本">
                                    <div class="help-text">建议使用简短的描述性文字</div>
                                </div>
                                <div class="property-item">
                                    <label>
                                        <span><span class="required">*</span> 字段名称</span>
                                        <i class="fas fa-question-circle help-icon" title="用于存储和引用的唯一标识"></i>
                                    </label>
                                    <input type="text" placeholder="请输入字段名称">
                                </div>
                                <div class="property-item">
                                    <label>
                                        <span>是否必填</span>
                                    </label>
                                    <div class="switch-wrapper">
                                        <label class="switch">
                                            <input type="checkbox">
                                            <span class="switch-slider"></span>
                                        </label>
                                        <span>必填</span>
                                    </div>
                                </div>
                            </div>
                            <div class="property-section">
                                <div class="property-section-title">验证规则</div>
                                <div class="property-item">
                                    <label>
                                        <span>占位提示</span>
                                    </label>
                                    <input type="text" placeholder="请输入占位提示文字">
                                </div>
                                <div class="property-item">
                                    <label>
                                        <span>校验规则</span>
                                    </label>
                                    <select>
                                        <option value="">无</option>
                                        <option value="email">邮箱</option>
                                        <option value="phone">手机号</option>
                                        <option value="idcard">身份证</option>
                                    </select>
                                </div>
                            </div>
                        `
                    },
                    textarea: {
                        label: '多行文本',
                        icon: 'fa-align-left',
                        preview: `
                            <div class="field-preview">
                                <textarea placeholder="请输入" rows="3" disabled></textarea>
                            </div>
                        `,
                        properties: `
                            <div class="property-section">
                                <div class="property-section-title">基础设置</div>
                                <div class="property-item">
                                    <label>
                                        <span><span class="required">*</span> 字段标签</span>
                                    </label>
                                    <input type="text" value="多行文本">
                                </div>
                                <div class="property-item">
                                    <label>
                                        <span><span class="required">*</span> 字段名称</span>
                                    </label>
                                    <input type="text" placeholder="请输入字段名称">
                                </div>
                                <div class="property-item">
                                    <label>
                                        <span>是否必填</span>
                                    </label>
                                    <div class="switch-wrapper">
                                        <label class="switch">
                                            <input type="checkbox">
                                            <span class="switch-slider"></span>
                                        </label>
                                        <span>必填</span>
                                    </div>
                                </div>
                            </div>
                            <div class="property-section">
                                <div class="property-section-title">外观设置</div>
                                <div class="property-item">
                                    <label>
                                        <span>默认行数</span>
                                    </label>
                                    <input type="number" value="3" min="2" max="10">
                                </div>
                                <div class="property-item">
                                    <label>
                                        <span>占位提示</span>
                                    </label>
                                    <input type="text" placeholder="请输入占位提示文字">
                                </div>
                            </div>
                        `
                    },
                    // ... 其他组件配置保持不变
                };
                return components[type] || {
                    label: '未知组件',
                    icon: 'fa-question',
                    preview: '<div>未知组件</div>'
                };
            }

            // 复制字段
            window.duplicateField = function(btn) {
                const field = btn.closest('.form-field');
                const type = field.getAttribute('data-type');
                addFormField(type);
            }

            // 删除字段
            window.deleteField = function(btn) {
                const field = btn.closest('.form-field');
                field.remove();
                
                // 如果没有字段了，显示占位符
                if (formCanvas.children.length === 0) {
                    formCanvas.innerHTML = `
                        <div class="form-placeholder">
                            <i class="fas fa-plus-circle"></i>
                            <p>拖拽组件到这里开始设计表单</p>
                        </div>
                    `;
                }
            }

            // 拖拽排序相关函数
            function handleDragStart(e) {
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', 'move');
            }

            function handleDragEnd(e) {
                this.classList.remove('dragging');
                document.querySelectorAll('.form-field').forEach(field => {
                    field.classList.remove('drag-over');
                });
            }

            function handleDragOver(e) {
                e.preventDefault();
                const draggingField = document.querySelector('.dragging');
                if (draggingField && draggingField !== this) {
                    this.classList.add('drag-over');
                }
            }

            function handleDrop(e) {
                e.preventDefault();
                const draggingField = document.querySelector('.dragging');
                if (draggingField && draggingField !== this) {
                    const allFields = [...formCanvas.querySelectorAll('.form-field')];
                    const draggingIndex = allFields.indexOf(draggingField);
                    const dropIndex = allFields.indexOf(this);
                    
                    if (draggingIndex < dropIndex) {
                        this.parentNode.insertBefore(draggingField, this.nextSibling);
                    } else {
                        this.parentNode.insertBefore(draggingField, this);
                    }
                }
                this.classList.remove('drag-over');
            }

            // 修改节点点击事件绑定
            function toggleNodeMenu(btn) {
                event.stopPropagation();
                const menu = btn.nextElementSibling;
                
                // 切换菜单显示状态
                if (menu.style.display === 'block') {
                    menu.style.display = 'none';
                } else {
                    // 关闭其他菜单
                    document.querySelectorAll('.node-add-menu').forEach(m => {
                        m.style.display = 'none';
                    });
                    menu.style.display = 'block';
                }
            }

            // 直接绑定节点点击事件，不使用initNodeEvents函数
            document.addEventListener('DOMContentLoaded', function() {
                console.log('DOM已加载完成，开始绑定节点点击事件');
                
                // 获取所有审批节点
                const approvalNodes = document.querySelectorAll('.approval-node');
                console.log('找到审批节点数量:', approvalNodes.length);
                
                // 为每个审批节点绑定点击事件
                approvalNodes.forEach((node, index) => {
                    console.log('绑定节点:', index, node.id || '未命名节点');
                    
                    // 移除可能已存在的onclick属性
                    node.removeAttribute('onclick');
                    
                    // 添加新的点击事件监听器
                    node.addEventListener('click', function(e) {
                        e.stopPropagation();
                        console.log('审批节点被点击:', this.querySelector('.node-title').textContent);
                        showPropertyPanel(this, 'approval');
                    });
                });
                
                // 获取条件节点
                const conditionNodes = document.querySelectorAll('.condition-node');
                console.log('找到条件节点数量:', conditionNodes.length);
                
                // 为每个条件节点绑定点击事件
                conditionNodes.forEach((node, index) => {
                    // 移除可能已存在的onclick属性
                    node.removeAttribute('onclick');
                    
                    // 添加新的点击事件监听器
                    node.addEventListener('click', function(e) {
                        e.stopPropagation();
                        console.log('条件节点被点击');
                        showPropertyPanel(this, 'condition');
                    });
                });
                
                // 绑定其他类型节点点击事件
                document.querySelectorAll('.notify-node, .process-node, .user-node').forEach(node => {
                    // 确定节点类型
                    let type = '';
                    if (node.classList.contains('notify-node')) type = 'notify';
                    else if (node.classList.contains('process-node')) type = 'process';
                    else if (node.classList.contains('user-node')) type = 'user';
                    
                    // 移除可能已存在的onclick属性
                    node.removeAttribute('onclick');
                    
                    // 添加新的点击事件监听器
                    node.addEventListener('click', function(e) {
                        e.stopPropagation();
                        console.log('节点被点击:', type);
                        showPropertyPanel(this, type);
                    });
                });
                
                // 绑定属性面板关闭按钮
                const closeBtn = document.querySelector('.property-panel-header .close-btn');
                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        console.log('点击了关闭按钮');
                        closePropertyPanel();
                    });
                }
                
                // 点击其他区域关闭节点菜单和属性面板
                document.addEventListener('click', function(e) {
                    // 关闭所有打开的节点菜单
                    if (!e.target.closest('.node-add-btn')) {
                        document.querySelectorAll('.node-add-menu').forEach(menu => {
                            menu.style.display = 'none';
                        });
                    }
                    
                    // 如果点击区域不是节点也不是属性面板，则关闭属性面板
                    if (!e.target.closest('.node') && !e.target.closest('.workflow-property-panel')) {
                        closePropertyPanel();
                    }
                });
            });

            // 显示属性面板
            function showPropertyPanel(node, type) {
                console.log('显示属性面板:', type);
                
                // 移除其他节点的选中状态
                document.querySelectorAll('.node').forEach(n => {
                    n.classList.remove('selected');
                });
                
                // 添加当前节点的选中状态
                node.classList.add('selected');
                
                // 获取属性面板
                const propertyPanel = document.getElementById('workflowPropertyPanel');
                
                // 设置面板标题和内容
                updatePropertyPanel(type);
                
                // 显示面板 - 先设置display
                propertyPanel.style.display = 'block';
                
                // 强制重绘以确保过渡效果正常
                propertyPanel.offsetHeight;
                
                // 添加显示类触发动画
                setTimeout(() => {
                    propertyPanel.classList.add('show');
                }, 10);
            }

            // 更新属性面板内容
            function updatePropertyPanel(type) {
                const propertyPanel = document.getElementById('workflowPropertyPanel');
                const panelHeader = propertyPanel.querySelector('.property-panel-header h4');
                
                // 根据节点类型设置标题和图标
                switch(type) {
                    case 'approval':
                        panelHeader.innerHTML = '<i class="fas fa-user-check"></i> 审批人';
                        break;
                    case 'notify':
                        panelHeader.innerHTML = '<i class="fas fa-bell"></i> 抄送人';
                        break;
                    case 'condition':
                        panelHeader.innerHTML = '<i class="fas fa-code-branch"></i> 条件分支';
                        break;
                    case 'process':
                        panelHeader.innerHTML = '<i class="fas fa-cog"></i> 处理节点';
                        break;
                    case 'user':
                        panelHeader.innerHTML = '<i class="fas fa-user"></i> 人事';
                        break;
                    default:
                        panelHeader.innerHTML = '<i class="fas fa-cog"></i> 节点设置';
                }
                
                // 显示对应的面板内容
                const tabsContainer = propertyPanel.querySelector('.property-panel-tabs');
                const contentInner = propertyPanel.querySelector('.property-panel-content-inner');
                
                // 根据节点类型显示不同的内容
                if (type === 'approval') {
                    // 审批人设置
                    tabsContainer.style.display = 'flex';
                    // 审批人设置的内容已经在HTML中定义
                } else if (type === 'notify') {
                    // 抄送人设置
                    tabsContainer.style.display = 'none';
                    contentInner.innerHTML = `
                        <div class="approver-selector">
                            <div class="approver-selector-title">请选择抄送人</div>
                            <div class="member-selector">
                                <div class="member-input">
                                    <span class="member-tag">
                                        管理员
                                        <i class="fas fa-times"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    `;
                } else if (type === 'condition') {
                    // 条件分支设置
                    tabsContainer.style.display = 'none';
                    contentInner.innerHTML = `
                        <div class="property-section">
                            <div class="property-section-title">条件设置</div>
                            <div class="property-item">
                                <label>条件名称</label>
                                <input type="text" placeholder="请输入条件名称">
                            </div>
                            <div class="property-item">
                                <label>条件表达式</label>
                                <div style="display: flex; gap: 8px; margin-top: 8px;">
                                    <select style="flex: 1;">
                                        <option>请假天数</option>
                                        <option>职级</option>
                                    </select>
                                    <select style="width: 80px;">
                                        <option>大于</option>
                                        <option>等于</option>
                                        <option>小于</option>
                                    </select>
                                    <input type="text" style="width: 80px;" placeholder="值">
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // 其他节点类型的默认设置
                    tabsContainer.style.display = 'none';
                    contentInner.innerHTML = `
                        <div class="property-section">
                            <div class="property-section-title">基本设置</div>
                            <div class="property-item">
                                <label>节点名称</label>
                                <input type="text" placeholder="请输入节点名称">
                            </div>
                        </div>
                    `;
                }
            }

            // 关闭属性面板
            function closePropertyPanel() {
                console.log('关闭属性面板');
                const propertyPanel = document.getElementById('workflowPropertyPanel');
                
                // 移除显示类，触发过渡效果
                propertyPanel.classList.remove('show');
                
                // 移除所有节点的选中状态
                document.querySelectorAll('.node').forEach(n => {
                    n.classList.remove('selected');
                });
                
                // 等待过渡效果完成后隐藏面板
                setTimeout(() => {
                    propertyPanel.style.display = 'none';
                }, 300);
            }

            // 添加条件分支
            function addConditionBranch() {
                alert('添加条件分支功能待实现');
            }

            // 设置全局函数以便HTML中可以调用
            window.toggleNodeMenu = toggleNodeMenu;
            window.showPropertyPanel = showPropertyPanel;
            window.closePropertyPanel = closePropertyPanel;
            window.addConditionBranch = addConditionBranch;
            window.addNode = function(type) {
                alert('添加节点功能待实现: ' + type);
            };
        });

        // jQuery-like contains 选择器的简单实现
        Element.prototype.contains = function (text) {
            return this.textContent.includes(text);
        };

        // 扩展 querySelector 以支持 :contains
        const originalQuerySelector = Document.prototype.querySelector;
        Document.prototype.querySelector = function (selector) {
            if (selector.includes(':contains(')) {
                const match = selector.match(/(.*):contains\("(.*)"\)(.*)/i);
                if (match) {
                    const [_, before, text, after] = match;
                    const elements = this.querySelectorAll(before + after);
                    for (let i = 0; i < elements.length; i++) {
                        if (elements[i].textContent.includes(text)) {
                            return elements[i];
                        }
                    }
                    return null;
                }
            }
            return originalQuerySelector.call(this, selector);
        };

        // 添加条件分支
        function addConditionBranch() {
            alert('添加条件分支功能待实现');
        }

        // 添加节点点击和属性面板相关的全局函数
        // 节点菜单切换
        function toggleNodeMenu(btn) {
            event.stopPropagation();
            const menu = btn.nextElementSibling;
            
            // 切换菜单显示状态
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                // 关闭其他菜单
                document.querySelectorAll('.node-add-menu').forEach(m => {
                    m.style.display = 'none';
                });
                menu.style.display = 'block';
            }
        }

        // 显示节点面板
        function showNodePanel(node, type) {
            console.log('显示节点面板:', type);
            
            // 先移除其他节点的选中状态
            document.querySelectorAll('.node').forEach(n => {
                n.classList.remove('selected');
            });
            
            // 如果是节点本身被点击，添加选中状态
            if (node.classList.contains('node')) {
                node.classList.add('selected');
            }
            
            // 获取属性面板
            const panel = document.getElementById('workflowPropertyPanel');
            
            // 更新面板标题
            const panelHeader = panel.querySelector('.property-panel-header h4');
            switch(type) {
                case 'approval':
                    panelHeader.innerHTML = '<i class="fas fa-user-check"></i> 审批人';
                    break;
                case 'notify':
                    panelHeader.innerHTML = '<i class="fas fa-bell"></i> 抄送人';
                    break;
                case 'condition':
                    panelHeader.innerHTML = '<i class="fas fa-code-branch"></i> 条件分支';
                    break;
                case 'process':
                    panelHeader.innerHTML = '<i class="fas fa-cog"></i> 处理节点';
                    break;
                case 'user':
                    panelHeader.innerHTML = '<i class="fas fa-user"></i> 人事';
                    break;
                default:
                    panelHeader.innerHTML = '<i class="fas fa-cog"></i> 节点设置';
                    break;
            }
            
            // 显示面板
            panel.style.display = 'block';
            
            // 强制重绘以确保过渡效果正常
            panel.offsetHeight;
            
            // 添加显示类
            panel.classList.add('show');
        }

        // 关闭属性面板
        function closePropertyPanel() {
            const panel = document.getElementById('workflowPropertyPanel');
            
            // 移除显示类
            panel.classList.remove('show');
            
            // 移除节点选中状态
            document.querySelectorAll('.node').forEach(n => {
                n.classList.remove('selected');
            });
            
            // 设置延时隐藏面板
            setTimeout(function() {
                panel.style.display = 'none';
            }, 300);
        }

        // 添加节点
        function addNode(type) {
            alert('添加节点: ' + type);
        }

        // 添加条件分支
        function addConditionBranch() {
            alert('添加条件分支功能待实现');
        }

        // 文档加载完成后，为点击面板外部区域关闭面板添加事件
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('click', function(e) {
                // 如果点击区域不在属性面板内，也不在节点上，则关闭面板
                if (!e.target.closest('.workflow-property-panel') && !e.target.closest('.node')) {
                    closePropertyPanel();
                }
                
                // 如果点击区域不在添加按钮上，关闭所有菜单
                if (!e.target.closest('.node-add-btn')) {
                    document.querySelectorAll('.node-add-menu').forEach(m => {
                        m.style.display = 'none';
                    });
                }
            });
            
            // 测试属性面板是否可以正常显示
            console.log('DOM加载完成，可以点击节点查看属性面板');
        });

        // 将函数挂载到window全局对象，确保HTML中的onclick可以访问
        window.toggleNodeMenu = toggleNodeMenu;
        window.showNodePanel = showNodePanel;
        window.closePropertyPanel = closePropertyPanel;
        window.addNode = addNode;
        window.addConditionBranch = addConditionBranch;

        // 全局变量存储当前选中字段
        let currentFieldId = null;
        let currentDeviceMode = 'pc';

        // 设备预览切换
        document.addEventListener('DOMContentLoaded', function() {
            // 设备切换按钮点击事件
            const deviceSwitchBtns = document.querySelectorAll('.device-switch-btn');
            
            deviceSwitchBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有按钮的激活状态
                    deviceSwitchBtns.forEach(b => b.classList.remove('active'));
                    
                    // 添加当前按钮的激活状态
                    this.classList.add('active');
                    
                    // 获取设备类型
                    const deviceType = this.getAttribute('data-device');
                    currentDeviceMode = deviceType;
                    
                    // 隐藏所有预览
                    document.querySelectorAll('.device-preview').forEach(preview => {
                        preview.classList.remove('active');
                    });
                    
                    // 显示对应的预览
                    document.querySelector(`.${deviceType}-preview`).classList.add('active');
                    
                    console.log(`切换到${deviceType === 'pc' ? '电脑端' : '手机端'}预览`);
                });
            });
            
            // 为表单字段添加点击事件(示例)
            initFormFieldEvents();
        });

        // 选择预览字段的全局函数
        function selectPreviewField(field, type) {
            // 阻止事件冒泡
            event.stopPropagation();
            
            console.log('选中字段类型:', type);
            
            // 获取字段ID
            const fieldId = field.getAttribute('data-field-id');
            currentFieldId = fieldId;
            
            // 移除所有字段的选中状态
            clearAllFieldSelection();
            
            // 添加选中状态到当前字段
            field.classList.add('selected');
            
            // 同步选中PC和移动端的相同字段
            if (field.classList.contains('preview-field')) {
                // 当前是PC端字段，同步选中移动端相应字段
                const mobileField = document.querySelector(`.mobile-field[data-field-id="${fieldId}"]`);
                if (mobileField) {
                    mobileField.classList.add('selected');
                }
            } else {
                // 当前是移动端字段，同步选中PC端相应字段
                const pcField = document.querySelector(`.preview-field[data-field-id="${fieldId}"]`);
                if (pcField) {
                    pcField.classList.add('selected');
                }
            }
            
            // 显示字段属性
            showFieldProperties(type, fieldId);
        }

        // 清除所有字段的选中状态
        function clearAllFieldSelection() {
            document.querySelectorAll('.preview-field, .mobile-field').forEach(field => {
                field.classList.remove('selected');
            });
        }

        // 显示字段属性
        function showFieldProperties(type, fieldId) {
            const propertyContent = document.getElementById('propertyContent');
            const fieldData = getFieldData(fieldId);
            const componentInfo = getComponentInfo(type);
            
            // 设置属性面板内容
            propertyContent.innerHTML = `
                <div class="property-section">
                    <div class="property-section-title">基础设置</div>
                    <div class="property-item">
                        <label>
                            <span><span class="required">*</span> 字段标签</span>
                            <i class="fas fa-question-circle help-icon" title="显示在表单中的字段名称"></i>
                        </label>
                        <input type="text" id="field-label" value="${fieldData.label}" onchange="updateFieldLabel(this.value)">
                        <div class="help-text">建议使用简短的描述性文字</div>
                    </div>
                    <div class="property-item">
                        <label>
                            <span><span class="required">*</span> 字段名称</span>
                            <i class="fas fa-question-circle help-icon" title="用于存储和引用的唯一标识"></i>
                        </label>
                        <input type="text" id="field-name" placeholder="请输入字段名称" value="${fieldData.name || ''}">
                    </div>
                    <div class="property-item">
                        <label>
                            <span>是否必填</span>
                        </label>
                        <div class="switch-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="field-required" ${fieldData.required ? 'checked' : ''} onchange="updateFieldRequired(this.checked)">
                                <span class="switch-slider"></span>
                            </label>
                            <span>必填</span>
                        </div>
                    </div>
                </div>
                ${componentInfo.properties || ''}
            `;
            
            // 显示属性面板
            propertyContent.classList.add('active');
        }

        // 更新字段标签
        function updateFieldLabel(value) {
            if (!currentFieldId) return;
            
            // 更新PC端字段
            const pcField = document.querySelector(`.preview-field[data-field-id="${currentFieldId}"]`);
            if (pcField) {
                const labelElem = pcField.querySelector('.field-label');
                if (labelElem) {
                    // 保留必填标记
                    const requiredMarkHtml = pcField.querySelector('.required-mark') ? '<span class="required-mark">*</span>' : '';
                    labelElem.innerHTML = requiredMarkHtml + value;
                }
            }
            
            // 更新移动端字段
            const mobileField = document.querySelector(`.mobile-field[data-field-id="${currentFieldId}"]`);
            if (mobileField) {
                const labelElem = mobileField.querySelector('.mobile-field-label');
                if (labelElem) {
                    // 保留必填标记
                    const requiredMarkHtml = mobileField.querySelector('.required-mark') ? '<span class="required-mark">*</span>' : '';
                    labelElem.innerHTML = requiredMarkHtml + value;
                }
            }
            
            console.log('更新字段标签为:', value);
        }

        // 更新字段必填状态
        function updateFieldRequired(isRequired) {
            if (!currentFieldId) return;
            
            // 更新PC端字段
            const pcField = document.querySelector(`.preview-field[data-field-id="${currentFieldId}"]`);
            if (pcField) {
                const labelElem = pcField.querySelector('.field-label');
                if (labelElem) {
                    const labelText = labelElem.textContent.replace('*', '').trim();
                    labelElem.innerHTML = isRequired ? `<span class="required-mark">*</span>${labelText}` : labelText;
                }
            }
            
            // 更新移动端字段
            const mobileField = document.querySelector(`.mobile-field[data-field-id="${currentFieldId}"]`);
            if (mobileField) {
                const labelElem = mobileField.querySelector('.mobile-field-label');
                if (labelElem) {
                    const labelText = labelElem.textContent.replace('*', '').trim();
                    labelElem.innerHTML = isRequired ? `<span class="required-mark">*</span>${labelText}` : labelText;
                }
            }
            
            console.log('更新字段必填状态为:', isRequired);
        }

        // 获取字段数据
        function getFieldData(fieldId) {
            // 这里应该从实际数据源获取，这里用示例数据
            const fieldDataMap = {
                'field-1': { label: '请假类型', name: 'leaveType', required: true },
                'field-2': { label: '开始时间', name: 'startTime', required: true },
                'field-3': { label: '结束时间', name: 'endTime', required: true },
                'field-4': { label: '请假天数（天）', name: 'leaveDays', required: true },
                'field-5': { label: '请假事由', name: 'leaveReason', required: true },
                'field-6': { label: '图片', name: 'image', required: false }
            };
            
            return fieldDataMap[fieldId] || { label: '未知字段', name: '', required: false };
        }

        // 初始化表单字段事件
        function initFormFieldEvents() {
            // 为字段添加点击事件
            document.querySelectorAll('.preview-field, .mobile-field').forEach(field => {
                // 移除可能存在的内联点击事件
                field.removeAttribute('onclick');
                
                // 添加点击事件
                field.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const fieldId = this.getAttribute('data-field-id');
                    const fieldType = getFieldTypeById(fieldId);
                    selectPreviewField(this, fieldType);
                });
            });
            
            // 点击表单设计区域外部取消选择
            document.querySelector('.form-design-area').addEventListener('click', function(e) {
                if (e.target === this || e.target.classList.contains('form-design-area')) {
                    clearAllFieldSelection();
                    currentFieldId = null;
                    
                    // 清空属性面板
                    document.getElementById('propertyContent').innerHTML = `
                        <div class="property-placeholder">
                            <p>请选择一个组件来设置属性</p>
                        </div>
                    `;
                }
            });
        }

        // 根据字段ID获取字段类型
        function getFieldTypeById(fieldId) {
            const fieldTypeMap = {
                'field-1': 'text',
                'field-2': 'date',
                'field-3': 'date',
                'field-4': 'number',
                'field-5': 'textarea',
                'field-6': 'image'
            };
            
            return fieldTypeMap[fieldId] || 'text';
        }

        // 添加表单字段
        function addFormField(type) {
            // 生成唯一ID
            const fieldId = 'field-' + (new Date().getTime());
            const componentInfo = getComponentInfo(type);
            
            // 添加到PC和手机预览中
            addFieldToPreview(fieldId, componentInfo, type);
            
            // 选中新添加的字段
            setTimeout(() => {
                const newField = document.querySelector(`.preview-field[data-field-id="${fieldId}"]`);
                if (newField) {
                    selectPreviewField(newField, type);
                }
            }, 100);
        }

        // 添加字段到预览区域
        function addFieldToPreview(fieldId, componentInfo, type) {
            // 创建PC端预览字段
            const pcField = document.createElement('div');
            pcField.className = 'preview-field';
            pcField.setAttribute('data-field-id', fieldId);
            pcField.innerHTML = `
                <div class="field-label"><span class="required-mark">*</span>${componentInfo.label}</div>
                <div class="field-control">
                    <div class="field-input">请输入${componentInfo.label}</div>
                    ${type === 'select' || type === 'date' || type === 'time' ? '<div class="field-arrow"><i class="fas fa-chevron-right"></i></div>' : ''}
                </div>
            `;
            
            // 添加点击事件
            pcField.addEventListener('click', function(e) {
                e.stopPropagation();
                selectPreviewField(this, type);
            });
            
            // 创建手机端预览字段
            const mobileField = document.createElement('div');
            mobileField.className = 'mobile-field';
            mobileField.setAttribute('data-field-id', fieldId);
            mobileField.innerHTML = `
                <div class="mobile-field-label"><span class="required-mark">*</span>${componentInfo.label}</div>
                <div class="mobile-field-control">
                    <div class="mobile-field-input">请输入${componentInfo.label}</div>
                    ${type === 'select' || type === 'date' || type === 'time' ? '<div class="mobile-field-arrow"><i class="fas fa-chevron-right"></i></div>' : ''}
                </div>
            `;
            
            // 添加点击事件
            mobileField.addEventListener('click', function(e) {
                e.stopPropagation();
                selectPreviewField(this, type);
            });
            
            // 添加到预览区域
            document.querySelector('.form-fields').appendChild(pcField);
            document.querySelector('.mobile-fields').appendChild(mobileField);
        }

        // 全局函数导出
        window.selectPreviewField = selectPreviewField;
        window.updateFieldLabel = updateFieldLabel;
        window.updateFieldRequired = updateFieldRequired;

        // 在文件开头添加全局getComponentInfo函数定义
        function getComponentInfo(componentId) {
            console.log('全局获取组件信息:', componentId);
            return {
                id: componentId,
                type: 'unknown',
                properties: {}
            };
        }
    </script>
</body>

</html>